version: '3.6'
services:
  shinyproxy:
    image: registry.gitlab.com/ccao-data-science---modeling/shiny_server:latest
    build: 
      context: .
      dockerfile: Dockerfile
      args:
        DATA_LOCATION: "/home/dfsnow/data"
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    ports:
      - "8080:8080"
    networks:
      - proxynet
    secrets:
      - db_config

networks:
  proxynet:

secrets:
  db_config:
    file: secrets/odbc.txt
